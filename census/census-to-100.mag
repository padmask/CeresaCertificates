// we run this on the survivors from census-detail2.mag.  This time we have
// 287 survivors, not 208 as before.
load "torsion-order.mag";
load "bound.mag";
load "curves-ht-1.mag";

P2 := ProjectiveSpace(Q,2);
ls4 := LinearSystem(P2,4);
curves := [Curve(P2,p(Domain(p)!i)): i in coefs] where p is PolynomialMap(ls4);

inf_inds := [];
tor_inds := [];
survivors := [1,105,3178,4575,6486,7643,8568,8874,8923,10581,42902,43455,45312,45320,46539,46543,47586,65225,65592,77220,78957,78976,80606,80834,83612,104116,113700,114754,114771,115593,128136,129657,130770,135971,142594,143835,143839,146872,147524,156913,157405,158346,159006,160171,162397,162421,162435,165748,166732,167619,169779,170041,173861,179098,187924,193665,193666,193720,193795,193804,193918,193919,193954,196057,196093,196295,196319,196337,197007,197008,197035,197125,197126,197252,197253,197285,199555,199635,199637,199639,199645,199646,199680,199690,199693,199796,200384,200385,200413,200486,200584,200585,202578,202587,202782,207818,214099,220075,221306,221734,221836,222347,222394,222396,222433,222480,223184,223186,223188,223231,223233,223235,223258,223295,223825,223826,224338,224762,225213,225629,226965,227496,230483,234990,237130,237131,237206,237275,237276,237484,237833,238042,238569,238570,238626,238627,238658,238689,238690,238856,239203,239225,239226,239887,239888,239943,239996,239997,240507,241295,241355,241407,241445,241519,241548,241552,241556,241559,241562,241564,241568,241570,241572,241573,241574,241575,242825,242826,243991,244001,244010,244027,244294,244305,244321,244326,244327,244329,244330,244332,244333,244336,244340,244341,244342,244643,244644,244670,244671,244676,244818,244833,244869,244870,244893,244909,244910,244912,244913,244918,244925,244926,244928,244929,244931,245375,245419,245447,245450,245452,245456,245457,245459,245740,245743,245746,245787,245790,245964,246026,246030,246032,246035,246038,246041,246043,246044,246045,246046,247009,247019,247191,247210,247212,247213,247222,247229,247230,247231,247251,247260,247261,247263,247264,247266,247267,247269,247270,247271,247693,247713,248155,248179,248190,248192,248194,248196,248198,248199,248414,248421,248423,248425,248434,248812,248914,250931,251890,251904,252130,253128,253546,253547,253665,253807,254648,254663,254669,254728,254792,254823,254844,254876,254902,254923,254926,254935];
for nc in survivors do
  c := curves[nc];
  bd := 2*bound_to(c,100);
  ords := check_c(c,100:goal := bd);
  max := LCM([x[2]: x in ords]);
  "lower bound for curve", nc, "is", max;
  if exists(m){m: m in ords|not IsDivisibleBy(bd,m[2])} then
    "failure of divisibility at", m[1], "with lower bound of", m[2], "and upper bound of", bd;
    Append(~inf_inds,<nc,m[1],m[2],bd>);
  else
    assert IsDivisibleBy(bd,max);
    "could be torsion for curve ", nc;
    Append(~tor_inds,<nc,bd,max>);
  end if;
end for;
